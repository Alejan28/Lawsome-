{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { db, storage } from '../InitApp/firebase';\nimport { collection, query, orderBy, onSnapshot, addDoc, serverTimestamp, doc, updateDoc } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nexport const useChatHistory = userId => {\n  _s();\n  const [conversations, setConversations] = useState([]);\n  const [currentConversationId, setCurrentConversationId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [usingLocal, setUsingLocal] = useState(false);\n\n  // 1. Load Conversations List\n  useEffect(() => {\n    if (!userId) {\n      setConversations([]);\n      setLoading(false);\n      return;\n    }\n    const q = query(collection(db, 'users', userId, 'conversations'), orderBy('updatedAt', 'desc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const convs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setConversations(convs);\n      setLoading(false);\n      setUsingLocal(false);\n    }, error => {\n      console.warn(\"Firestore access failed. Falling back to localStorage.\", error);\n      setUsingLocal(true);\n      try {\n        const localConvs = JSON.parse(localStorage.getItem(`conversations_${userId}`) || \"[]\");\n        setConversations(localConvs);\n      } catch (e) {\n        console.error(e);\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [userId]);\n\n  // 2. Load Messages for Current Conversation\n  useEffect(() => {\n    if (!userId || !currentConversationId) {\n      setMessages([]);\n      return;\n    }\n    if (usingLocal) {\n      try {\n        const localMsgs = JSON.parse(localStorage.getItem(`messages_${currentConversationId}`) || \"[]\");\n        setMessages(localMsgs);\n      } catch (e) {\n        console.error(e);\n      }\n      return;\n    }\n    const q = query(collection(db, 'users', userId, 'conversations', currentConversationId, 'messages'), orderBy('timestamp', 'asc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMessages(msgs);\n    });\n    return () => unsubscribe();\n  }, [userId, currentConversationId, usingLocal]);\n\n  // 3. Start New Conversation\n  const startNewConversation = async (title = \"Conversație Nouă\") => {\n    if (!userId) return;\n    const newConv = {\n      title,\n      createdAt: usingLocal ? Date.now() : serverTimestamp(),\n      updatedAt: usingLocal ? Date.now() : serverTimestamp(),\n      lastMessage: \"Început de conversație\"\n    };\n    if (usingLocal) {\n      const id = \"local_\" + Date.now();\n      const updatedConvs = [{\n        id,\n        ...newConv,\n        createdAt: Date.now(),\n        updatedAt: Date.now()\n      }, ...conversations];\n      localStorage.setItem(`conversations_${userId}`, JSON.stringify(updatedConvs));\n      setConversations(updatedConvs);\n      setCurrentConversationId(id);\n      return id;\n    } else {\n      try {\n        const docRef = await addDoc(collection(db, 'users', userId, 'conversations'), newConv);\n        setCurrentConversationId(docRef.id);\n        return docRef.id;\n      } catch (e) {\n        console.error(\"Error creating conversation, switching to local\", e);\n        setUsingLocal(true);\n        // Retry locally\n        return startNewConversation(title);\n      }\n    }\n  };\n\n  // 4. Send Message\n  const saveMessage = async message => {\n    if (!userId) return;\n    let activeId = currentConversationId;\n    if (!activeId) {\n      // Auto-create conversation if none selected\n      const title = message.text.substring(0, 30) + (message.text.length > 30 ? \"...\" : \"\");\n      activeId = await startNewConversation(title);\n    }\n    let fileUrl = null;\n    if (message.fileBlob && !usingLocal) {\n      try {\n        const storageRef = ref(storage, `chat_files/${userId}/${Date.now()}_document.docx`);\n        await uploadBytes(storageRef, message.fileBlob);\n        fileUrl = await getDownloadURL(storageRef);\n      } catch (e) {\n        console.error(\"File upload failed\", e);\n      }\n    }\n    const msgData = {\n      text: message.text,\n      sender: message.sender,\n      timestamp: usingLocal ? Date.now() : serverTimestamp(),\n      fileUrl: fileUrl || null\n    };\n    if (usingLocal) {\n      const localMsgs = JSON.parse(localStorage.getItem(`messages_${activeId}`) || \"[]\");\n      const newMsgs = [...localMsgs, {\n        ...msgData,\n        timestamp: Date.now()\n      }];\n      localStorage.setItem(`messages_${activeId}`, JSON.stringify(newMsgs));\n      setMessages(newMsgs);\n      const updatedConvs = conversations.map(c => c.id === activeId ? {\n        ...c,\n        lastMessage: message.text,\n        updatedAt: Date.now()\n      } : c);\n      localStorage.setItem(`conversations_${userId}`, JSON.stringify(updatedConvs));\n      setConversations(updatedConvs);\n    } else {\n      try {\n        await addDoc(collection(db, 'users', userId, 'conversations', activeId, 'messages'), msgData);\n        await updateDoc(doc(db, 'users', userId, 'conversations', activeId), {\n          lastMessage: message.text,\n          updatedAt: serverTimestamp()\n        });\n      } catch (e) {\n        console.error(\"Error sending message\", e);\n      }\n    }\n  };\n  return {\n    conversations,\n    currentConversationId,\n    messages,\n    loading,\n    saveMessage,\n    startNewConversation,\n    selectConversation: setCurrentConversationId\n  };\n};\n_s(useChatHistory, \"3SP9UK3/qAxGeabsOsWT2WCMqYA=\");","map":{"version":3,"names":["useState","useEffect","db","storage","collection","query","orderBy","onSnapshot","addDoc","serverTimestamp","doc","updateDoc","ref","uploadBytes","getDownloadURL","useChatHistory","userId","_s","conversations","setConversations","currentConversationId","setCurrentConversationId","messages","setMessages","loading","setLoading","usingLocal","setUsingLocal","q","unsubscribe","snapshot","convs","docs","map","id","data","error","console","warn","localConvs","JSON","parse","localStorage","getItem","e","localMsgs","msgs","startNewConversation","title","newConv","createdAt","Date","now","updatedAt","lastMessage","updatedConvs","setItem","stringify","docRef","saveMessage","message","activeId","text","substring","length","fileUrl","fileBlob","storageRef","msgData","sender","timestamp","newMsgs","c","selectConversation"],"sources":["C:/Users/40741/IdeaProjects/lawsome-app/src/hooks/useChatHistory.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { db, storage } from '../InitApp/firebase';\r\nimport { collection, query, orderBy, onSnapshot, addDoc, serverTimestamp, doc, updateDoc } from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\n\r\nexport const useChatHistory = (userId) => {\r\n    const [conversations, setConversations] = useState([]);\r\n    const [currentConversationId, setCurrentConversationId] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [usingLocal, setUsingLocal] = useState(false);\r\n\r\n    // 1. Load Conversations List\r\n    useEffect(() => {\r\n        if (!userId) {\r\n            setConversations([]);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const q = query(\r\n            collection(db, 'users', userId, 'conversations'),\r\n            orderBy('updatedAt', 'desc')\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const convs = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setConversations(convs);\r\n            setLoading(false);\r\n            setUsingLocal(false);\r\n        }, (error) => {\r\n            console.warn(\"Firestore access failed. Falling back to localStorage.\", error);\r\n            setUsingLocal(true);\r\n            try {\r\n                const localConvs = JSON.parse(localStorage.getItem(`conversations_${userId}`) || \"[]\");\r\n                setConversations(localConvs);\r\n            } catch (e) { console.error(e); }\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [userId]);\r\n\r\n    // 2. Load Messages for Current Conversation\r\n    useEffect(() => {\r\n        if (!userId || !currentConversationId) {\r\n            setMessages([]);\r\n            return;\r\n        }\r\n\r\n        if (usingLocal) {\r\n            try {\r\n                const localMsgs = JSON.parse(localStorage.getItem(`messages_${currentConversationId}`) || \"[]\");\r\n                setMessages(localMsgs);\r\n            } catch (e) { console.error(e); }\r\n            return;\r\n        }\r\n\r\n        const q = query(\r\n            collection(db, 'users', userId, 'conversations', currentConversationId, 'messages'),\r\n            orderBy('timestamp', 'asc')\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const msgs = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setMessages(msgs);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [userId, currentConversationId, usingLocal]);\r\n\r\n    // 3. Start New Conversation\r\n    const startNewConversation = async (title = \"Conversație Nouă\") => {\r\n        if (!userId) return;\r\n        \r\n        const newConv = {\r\n            title,\r\n            createdAt: usingLocal ? Date.now() : serverTimestamp(),\r\n            updatedAt: usingLocal ? Date.now() : serverTimestamp(),\r\n            lastMessage: \"Început de conversație\"\r\n        };\r\n\r\n        if (usingLocal) {\r\n            const id = \"local_\" + Date.now();\r\n            const updatedConvs = [{ id, ...newConv, createdAt: Date.now(), updatedAt: Date.now() }, ...conversations];\r\n            localStorage.setItem(`conversations_${userId}`, JSON.stringify(updatedConvs));\r\n            setConversations(updatedConvs);\r\n            setCurrentConversationId(id);\r\n            return id;\r\n        } else {\r\n            try {\r\n                const docRef = await addDoc(collection(db, 'users', userId, 'conversations'), newConv);\r\n                setCurrentConversationId(docRef.id);\r\n                return docRef.id;\r\n            } catch (e) {\r\n                console.error(\"Error creating conversation, switching to local\", e);\r\n                setUsingLocal(true);\r\n                // Retry locally\r\n                return startNewConversation(title);\r\n            }\r\n        }\r\n    };\r\n\r\n    // 4. Send Message\r\n    const saveMessage = async (message) => {\r\n        if (!userId) return;\r\n\r\n        let activeId = currentConversationId;\r\n        if (!activeId) {\r\n            // Auto-create conversation if none selected\r\n            const title = message.text.substring(0, 30) + (message.text.length > 30 ? \"...\" : \"\");\r\n            activeId = await startNewConversation(title);\r\n        }\r\n\r\n        let fileUrl = null;\r\n        if (message.fileBlob && !usingLocal) {\r\n             try {\r\n                const storageRef = ref(storage, `chat_files/${userId}/${Date.now()}_document.docx`);\r\n                await uploadBytes(storageRef, message.fileBlob);\r\n                fileUrl = await getDownloadURL(storageRef);\r\n            } catch (e) { console.error(\"File upload failed\", e); }\r\n        }\r\n\r\n        const msgData = {\r\n            text: message.text,\r\n            sender: message.sender,\r\n            timestamp: usingLocal ? Date.now() : serverTimestamp(),\r\n            fileUrl: fileUrl || null\r\n        };\r\n\r\n        if (usingLocal) {\r\n            const localMsgs = JSON.parse(localStorage.getItem(`messages_${activeId}`) || \"[]\");\r\n            const newMsgs = [...localMsgs, { ...msgData, timestamp: Date.now() }];\r\n            localStorage.setItem(`messages_${activeId}`, JSON.stringify(newMsgs));\r\n            setMessages(newMsgs);\r\n\r\n            const updatedConvs = conversations.map(c => \r\n                c.id === activeId ? { ...c, lastMessage: message.text, updatedAt: Date.now() } : c\r\n            );\r\n            localStorage.setItem(`conversations_${userId}`, JSON.stringify(updatedConvs));\r\n            setConversations(updatedConvs);\r\n        } else {\r\n            try {\r\n                await addDoc(collection(db, 'users', userId, 'conversations', activeId, 'messages'), msgData);\r\n                await updateDoc(doc(db, 'users', userId, 'conversations', activeId), {\r\n                    lastMessage: message.text,\r\n                    updatedAt: serverTimestamp()\r\n                });\r\n            } catch (e) {\r\n                console.error(\"Error sending message\", e);\r\n            }\r\n        }\r\n    };\r\n\r\n    return { \r\n        conversations, \r\n        currentConversationId, \r\n        messages, \r\n        loading, \r\n        saveMessage, \r\n        startNewConversation, \r\n        selectConversation: setCurrentConversationId \r\n    };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}